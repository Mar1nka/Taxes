!function(e){var t={};function n(s){if(t[s])return t[s].exports;var a=t[s]={i:s,l:!1,exports:{}};return e[s].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(s,a,function(t){return e[t]}.bind(null,a));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/public/",n(n.s=1)}([function(e,t,n){window,e.exports=function(e){var t={};function n(s){if(t[s])return t[s].exports;var a=t[s]={i:s,l:!1,exports:{}};return e[s].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(s,a,function(t){return e[t]}.bind(null,a));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){n(2);let s=[];const a=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],i=["January","February","March","April","May","June","July","August","September","October","November","December"],r={t:"top",r:"right",b:"bottom",l:"left",c:"centered"},o=["click","focusin","keydown","input"];function l(e){return Array.isArray(e)?e.map(l):"[object Object]"==={}.toString.call(e)?Object.keys(e).reduce((t,n)=>(t[n]=l(e[n]),t),{}):e}function c(e,t){const n=t.calendar.querySelector(".qs-overlay"),s=n&&!n.classList.contains("qs-hidden");t.calendar.innerHTML=[function(e,t,n){return`\n    <div class="qs-controls ">\n      <div class="qs-arrow qs-left"></div>\n      <div class="qs-month-year">\n        <span class="qs-month">${t.months[e.getMonth()]}</span>\n        <span class="qs-year">${e.getFullYear()}</span>\n      </div>\n      <div class="qs-arrow qs-right"></div>\n    </div>\n  `}(e,t),function(e,t,n){const{currentMonth:s,currentYear:a,dateSelected:i,maxDate:r,minDate:o,days:l,disabledDates:c,disabler:d,noWeekends:u,startDay:h,weekendIndices:m}=t,p=new Date,y=a===p.getFullYear()&&s===p.getMonth(),v=f(new Date(e).setDate(1)),x=v.getDay()-h,b=x<0?7:0;v.setMonth(v.getMonth()+1),v.setDate(0);const g=v.getDate(),q=[];let D=b+7*((x+g)/7|0);D+=(x+g)%7?7:0,0!==h&&0===x&&(D+=7);for(let e=1;e<=D;e++){const t=(e-1)%7,n=l[t],h=e-(x>=0?x:7+x),f=new Date(a,s,h),v=h<1||h>g;let b="",D=`<span class="qs-num">${h}</span>`;if(v)b="qs-empty",D="";else{let e=o&&f<o||r&&f>r||d&&d(f)||c.includes(+f);const n=m.includes(t),s=y&&!e&&h===p.getDate();b=(e=e||u&&n)?"qs-disabled":s?"qs-current":""}+f!=+i||v||(b+=" qs-active"),q.push(`<div class="qs-square qs-num ${n} ${b}">${D}</div>`)}const S=l.map(e=>`<div class="qs-square qs-day">${e}</div>`).concat(q);if(S.length%7!=0)throw"Calendar not constructed properly. The # of squares should be a multiple of 7.";return S.unshift(`<div class="qs-squares ${n?"qs-blur":""}">`),S.push("</div>"),S.join("")}(e,t,s),function(e,t){const{overlayPlaceholder:n,overlayButton:s}=e;return`\n    <div class="qs-overlay ${t?"":"qs-hidden"}">\n      <div class="qs-close">&#10005;</div>\n      <input class="qs-overlay-year" placeholder="${n}" />\n      <div class="qs-submit qs-disabled">${s}</div>\n    </div>\n  `}(t,s)].join(""),s&&setTimeout(()=>v(!0,t),10)}function d(e,t,n){const{currentMonth:s,currentYear:a,calendar:i,el:r,onSelect:o}=t,l=i.querySelector(".qs-active"),c=e.textContent;t.dateSelected=n?void 0:new Date(a,s,c),l&&l.classList.remove("qs-active"),n||e.classList.add("qs-active"),u(r,t,n),!n&&p(t),o&&o(t,n?void 0:new Date(t.dateSelected))}function u(e,t,n){if(!t.nonInput)return n?e.value="":t.formatter?t.formatter(e,t.dateSelected,t):void(e.value=t.dateSelected.toDateString())}function h(e,t,n){n?t.currentYear=n:(t.currentMonth+=e.contains("qs-right")?1:-1,12===t.currentMonth?(t.currentMonth=0,t.currentYear++):-1===t.currentMonth&&(t.currentMonth=11,t.currentYear--)),t.currentMonthName=t.months[t.currentMonth],c(new Date(t.currentYear,t.currentMonth,1),t),t.onMonthChange&&t.onMonthChange(t)}function m(e){return"[object Date]"==={}.toString.call(e)&&"Invalid Date"!==e.toString()}function f(e){const t=new Date(+e);if(null!=e&&m(t))return new Date(t.getFullYear(),t.getMonth(),t.getDate())}function p(e,t){v(!0,e),!e.alwaysShow&&e.calendar.classList.add("qs-hidden"),!t&&e.onHide&&e.onHide(e)}function y(e,t){e.calendar.classList.remove("qs-hidden"),function(e){if(e.noPosition)return;const{el:t,calendar:n,position:s,parent:a}=e,{top:i,right:r,centered:o}=s;if(o)return n.classList.add("qs-centered");const[l,c,d]=[a,t,n].map(e=>e.getBoundingClientRect()),u=`\n    top:${c.top-l.top+a.scrollTop-(i?d.height:-1*c.height)}px;\n    left:${c.left-l.left+(r?c.width-d.width:0)}px;\n  `;n.setAttribute("style",u)}(e),!t&&e.onShow&&e.onShow(e)}function v(e,t){const{calendar:n}=t,s=n.querySelector(".qs-overlay"),a=s.querySelector(".qs-overlay-year"),i=n.querySelector(".qs-controls"),r=n.querySelector(".qs-squares");e?(s.classList.add("qs-hidden"),i.classList.remove("qs-blur"),r.classList.remove("qs-blur"),a.value=""):(s.classList.remove("qs-hidden"),i.classList.add("qs-blur"),r.classList.add("qs-blur"),a.focus())}function x(e,t,n){const s=isNaN(+(new Date).setFullYear(t.value||void 0));if(13===(e.which||e.keyCode)||"click"===e.type){if(s||t.classList.contains("qs-disabled"))return;h(null,n,t.value)}else n.calendar.contains(t)&&n.calendar.querySelector(".qs-submit").classList[s?"add":"remove"]("qs-disabled")}function b(e){const{type:t,target:n}=e,{classList:a}=n,i=s.filter(({calendar:e,el:t})=>e.contains(n)||t===n)[0],r=i&&i.calendar.contains(n);if(!(i&&i.isMobile&&i.disableMobile))if("click"===t){if(!i)return s.forEach(p);const{calendar:t,disableYearOverlay:o}=i,l=!!t.querySelector(".qs-hidden"),c=t.querySelector(".qs-month-year").contains(n);if(i.noPosition&&!r)(t.classList.contains("qs-hidden")?y:p)(i);else if(a.contains("qs-arrow"))h(a,i);else if(c||a.contains("qs-close"))!o&&v(!l,i);else{if(a.contains("qs-num")){const e="SPAN"===n.nodeName?n.parentNode:n,t=["qs-disabled","qs-empty"].some(t=>e.classList.contains(t));return e.classList.contains("qs-active")?d(e,i,!0):!t&&d(e,i)}a.contains("qs-submit")&&!a.contains("qs-disabled")&&x(e,t.querySelector(".qs-overlay-year"),i)}}else if("focusin"===t&&i)y(i),s.forEach(e=>e!==i&&p(e));else if("keydown"===t&&i){const t=!i.calendar.querySelector(".qs-overlay").classList.contains("qs-hidden");13===(e.which||e.keyCode)&&t&&r?x(e,n,i):27===(e.which||e.keyCode)&&t&&r&&v(!0,i)}else if("input"===t){if(!i||!i.calendar.contains(n))return;const e=n.parentElement.querySelector(".qs-submit"),t=n.value.split("").reduce((e,t)=>e||"0"!==t?t.match(/[0-9]/)?e+t:e:"","").slice(0,4);n.value=t,e.classList[4===t.length?"remove":"add"]("qs-disabled")}}function g(){y(this,!0)}function q(){p(this,!0)}function D(e,t){const n=f(e),{currentYear:s,currentMonth:a}=this;if(void 0!==n&&!n)throw"`setDate` needs a JavaScript Date object.";if(void 0===n)return this.dateSelected=void 0,this.sibling&&(this.first?this.setMin():this.setMax()),u(this.el,this,!0),c(new Date(this.currentYear,this.currentMonth),this),this;if(this.disabledDates.some(e=>+e==+n)||n<this.minDate||n>this.maxDate)throw"You can't manually set a date that's disabled.";if(this.currentYear=n.getFullYear(),this.currentMonth=n.getMonth(),this.currentMonthName=this.months[n.getMonth()],this.dateSelected=n,u(this.el,this),(s===n.getFullYear()&&a===n.getMonth()||t)&&c(n,this),this.sibling){const e=this.first?"setMin":"setMax";this[e](n),this.sibling[e](n)}return this}function S(e){return _(this,e,!0)}function w(e){return _(this,e)}function _(e,t,n,s){if(null!=t&&!m(t))throw`Invalid date passed to set${n?"Min":"Max"}`;const{dateSelected:a}=e,i=f(t);if(n&&i>e.maxDate)throw"You can't set the minimum date past the maximum.";if(!n&&i<e.minDate)throw"You can't set the maximum date below the minimum.";return a&&(e.sibling?(n&&e.first||!n&&!e.first)&&(e.dateSelected=i):(n&&a<i||!n&&a>i)&&(e.dateSelected=void 0,e.nonInput||(e.el.value=""))),e[n?"minDate":"maxDate"]=i,c(a||e.startDate,e),!s&&e.sibling&&_(e.sibling,i,n,!0),e}function M(){const{inlinePosition:e,parent:t,calendar:n,el:a,sibling:i}=this;e&&(s.some(e=>e!==this&&e.parent===t)||t.style.setProperty("position",null)),n.remove(),s=s.filter(e=>e.el!==a),i&&delete i.sibling;for(let e in this)delete this[e];s.length||o.forEach(e=>document.removeEventListener(e,b))}e.exports=function(e,t){s.length||o.forEach(e=>document.addEventListener(e,b));const n=function(e,t){const n="string"==typeof e?document.querySelector(e):e,o=function(e,t){if(s.some(e=>e.el===t))throw"A datepicker already exists on that element.";const n=l(e);let{position:i,maxDate:o,minDate:c,dateSelected:d,customMonths:u,customDays:h,overlayPlaceholder:p,overlayButton:y,startDay:v,disabledDates:x}=n;if(n.hasOwnProperty("id")&&null==n.id)throw"Id cannot be `null` or `undefined`";if(n.id){const e=s.reduce((e,t)=>(t.id===n.id&&e.push(t),e),[]);if(e.length>1)throw"Only two datepickers can share an id.";e.length&&(n.sibling=e[0])}n.disabledDates=(x||[]).map(e=>{if(!m(e))throw'You supplied an invalid date to "options.disabledDates".';if(+f(e)==+f(d))throw'"disabledDates" cannot contain the same date as "dateSelected".';return+f(e)});const b=["tr","tl","br","bl","c"].some(e=>i===e);if(i&&!b)throw'"options.position" must be one of the following: tl, tr, bl, br, or c.';if(n.position=function([e,t]){const n={};return n[r[e]]=1,t&&(n[r[t]]=1),n}(i||"bl"),["startDate","dateSelected","minDate","maxDate"].forEach(e=>{if(n[e]){if(!m(n[e])||isNaN(+n[e]))throw`"options.${e}" needs to be a valid JavaScript Date object.`;n[e]=f(n[e])}}),n.startDate=f(n.startDate||n.dateSelected||new Date),o<c)throw'"maxDate" in options is less than "minDate".';if(d){if(c>d)throw'"dateSelected" in options is less than "minDate".';if(o<d)throw'"dateSelected" in options is greater than "maxDate".'}if(["onSelect","onShow","onHide","onMonthChange","formatter","disabler"].forEach(e=>{n[e]="function"==typeof n[e]&&n[e]}),[u,h].forEach((e,t)=>{if(e){if(!Array.isArray(e)||e.length!==(t?7:12)||e.some(e=>"string"!=typeof e))throw['"customMonths" must be an array with 12 strings.','"customDays" must be an array with 7 strings.'][t];n[t?"days":"months"]=e}}),v&&+v>0&&+v<7){let e=(n.customDays||a).slice();const t=e.splice(0,v);n.customDays=e.concat(t),n.startDay=+v,n.weekendIndices=[e.length-1,e.length]}else n.startDay=0,n.weekendIndices=[6,0];return"string"!=typeof p&&delete n.overlayPlaceholder,"string"!=typeof y&&delete n.overlayButton,n}(t||{startDate:f(new Date),position:"bl"},n),{startDate:c,dateSelected:d}=o,h=n===document.body,p=h?document.body:n.parentElement,v=document.createElement("div");v.className="qs-datepicker qs-hidden";const x={el:n,parent:p,nonInput:"INPUT"!==n.nodeName,noPosition:h,position:!h&&o.position,startDate:c,dateSelected:d,disabledDates:o.disabledDates,minDate:o.minDate,maxDate:o.maxDate,noWeekends:!!o.noWeekends,weekendIndices:o.weekendIndices,calendar:v,currentMonth:(c||d).getMonth(),currentMonthName:(o.months||i)[(c||d).getMonth()],currentYear:(c||d).getFullYear(),setDate:D,remove:M,setMin:S,setMax:w,show:g,hide:q,onSelect:o.onSelect,onShow:o.onShow,onHide:o.onHide,onMonthChange:o.onMonthChange,formatter:o.formatter,disabler:o.disabler,months:o.months||i,days:o.customDays||a,startDay:o.startDay,overlayPlaceholder:o.overlayPlaceholder||"4-digit year",overlayButton:o.overlayButton||"Submit",disableYearOverlay:!!o.disableYearOverlay,disableMobile:!!o.disableMobile,isMobile:"ontouchstart"in window,alwaysShow:!!o.alwaysShow,id:o.id};o.sibling&&(x.sibling=o.sibling,x.sibling.first=!0,o.sibling.sibling=x),d&&u(n,x);const b=getComputedStyle(p).position;return h||b&&"static"!==b||(x.inlinePosition=!0,p.style.setProperty("position","relative")),x.inlinePosition&&s.filter(e=>e.parent===x.parent).forEach(e=>e.inlinePosition=!0),s.push(x),p.appendChild(v),x.alwaysShow&&y(x),x}(e,t),{startDate:d,dateSelected:h}=n;return c(d||h,n),n}},function(e,t,n){}])},function(e,t,n){"use strict";n.r(t);let s=0;class a{constructor(){this.date=null,this.income=null,this.currency="USD",this.id=++s}}const i="http://www.nbrb.by/API/ExRates/Rates/",r="ParamMode=2";var o=n(0),l=n.n(o);const c=[{text:"USD",textCode:"USD"},{text:"EUR",textCode:"EUR"},{text:"RUB",textCode:"RUB"}];let d=document.createElement("option");d.value="RUB",d.innerHTML="RUB";let u=document.createElement("option");u.value="USD",u.innerHTML="USD";const h=new class{getCurrency(e,t){let n=`${i}${e}?onDate=${t}&${r}`;return new Promise(function(e,t){let s=new XMLHttpRequest;s.open("GET",n,!0),s.onreadystatechange=function(){if(4===this.readyState)if(this.status>=200&&this.status<=300)e(this.responseText);else{let e=new Error(this.statusText);e.code=this.status,t(e)}},s.send()})}},m=13;new class{constructor(){this.taxesList=[],this.setHandlerAddTask();let e=document.querySelector(".taxes__items");this.focusOutHandler=this.focusOutHandler.bind(this),e.addEventListener("focusout",this.focusOutHandler),this.formatInputIncome=this.formatInputIncome.bind(this),e.addEventListener("input",this.formatInputIncome),this.clickRemoveHandler=this.clickRemoveHandler.bind(this),e.addEventListener("click",this.clickRemoveHandler),this.addTaxHtml();const t=document.querySelector(".taxes");this.submitHandler=this.submitHandler.bind(this),t.addEventListener("submit",this.submitHandler)}submitHandler(e){e.preventDefault(),this.calculateTaxes()}calculateTaxes(){let e=0,t=0,n=this.taxesList.length;for(let s=0;s<n;s++)h.getCurrency(this.taxesList[s].currency,this.taxesList[s].date).then(a=>{e++;const i=JSON.parse(a),r=+(this.taxesList[s].income*i.Cur_OfficialRate/i.Cur_Scale).toFixed(2);t+=r;const o=this.taxesList[s].id,l=document.querySelector(`#tax_${o}`);l.querySelector(".tax__course").value=`${i.Cur_OfficialRate} / ${i.Cur_Scale}`,l.querySelector(".tax__sum").value=r.toFixed(2);const c=l.querySelector(".tax__tax"),d=r/100*m;if(c.value=d.toFixed(2),e===n){const e=(t/100*m).toFixed(2);this.setTotalTax(e)}})}setTotalTax(e){let t="";e&&(t=`${e} BYN`),document.querySelector(".calculate__total").textContent=t}clickRemoveHandler(e){const t=e.target;if(t.classList.contains("tax__btn-remove")){const e=+t.parentNode.id.split("tax_")[1];this.removeTax(e),this.removeTaxElement(t.parentNode),this.setTotalTax(null),this.taxesList.length||this.addTaxHtml()}}removeTax(e){let t=null;for(let n=0;n<this.taxesList.length;n++)if(this.taxesList[n].id===e){t=n;break}isNaN(t)||this.taxesList.splice(t,1)}removeTaxElement(e){e.parentNode.removeChild(e)}formatInputIncome(e){const t=e.target;t.classList.contains("tax__income")&&(t.value=t.value.replace(/[^\d,.]*/g,"").replace(/([,.])[,.]+/g,"$1").replace(/^[^\d]*(\d+([.,]\d{0,2})?).*$/g,"$1"))}focusOutHandler(e){const t=event.target;let n=+t.parentNode.parentNode.id.split("tax_")[1],s=this.filterTaxes(n);s&&(t.classList.contains("tax__date")?s.date=t.value:t.classList.contains("tax__income")?s.income=+t.value:t.classList.contains("tax__currency")&&(s.currency=t.value))}filterTaxes(e){let t=null;for(let n=0;n<this.taxesList.length;n++)if(this.taxesList[n].id===e){t=this.taxesList[n];break}return t}setHandlerAddTask(){this.addTax=document.querySelector(".button--add"),this.addTaxHtml=this.addTaxHtml.bind(this),this.addTax.addEventListener("click",this.addTaxHtml)}addTaxHtml(){let e=new a;this.taxesList.push(e);const t=this.createTaxElement(e.id);document.querySelector(".taxes__items").appendChild(t),this.setTotalTax(null),this.setScrollBottom()}createTaxElement(e){const t=this.createDateElement(),n=this.createIncomeElement(),s=this.createCurrencyElement(),a=this.createCourseElement(),i=this.createSumElement(),r=this.createTaxItemElement(),o=this.createBtnRemoveElement(),l=document.createElement("div");l.classList.add("tax__data"),l.appendChild(t),l.appendChild(n),l.appendChild(s),l.appendChild(a),l.appendChild(i),l.appendChild(r),l.appendChild(o);const c=document.createElement("div");return c.classList.add("tax"),c.appendChild(l),c.appendChild(o),this.createDatePicker(t),c.id=`tax_${e}`,c}createDatePicker(e){const t=new Date,n=t.getFullYear(),s=t.getMonth(),a=t.getDate();return new l.a(e,{customMonths:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],customDays:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],startDay:1,dateSelected:new Date(n,s,a),overlayPlaceholder:"Введите год...",overlayButton:"Перейти",formatter:(e,t,n)=>{const s=t.toLocaleDateString();e.value=s},maxDate:new Date(n,s,a),minDate:new Date(2016,0,1)})}createDateElement(){const e=document.createElement("input");return e.classList.add("tax__item","tax__date"),e.type="text",e.name="date",e.autocomplete="off",e.setAttribute("required","true"),e}createIncomeElement(){const e=document.createElement("input");return e.classList.add("tax__item","tax__income"),e.type="text",e.setAttribute("required","true"),e.value="0.00",e.autocomplete="off",e}createCurrencyElement(){const e=document.createElement("select");e.classList.add("tax__item","tax__currency"),e.name="currency",e.setAttribute("required","true");for(let t=0;t<c.length;t++){let n=this.createOptionCurrency(c[t].text,c[t].textCode);e.appendChild(n)}return e}createOptionCurrency(e,t){let n=document.createElement("option");return n.value=t,n.innerHTML=e,n}createCourseElement(){const e=document.createElement("input");return e.classList.add("tax__item","tax__course"),e.type="text",e.setAttribute("required","true"),e.readOnly=!0,e.value="0.00",e.style="outline: none",e}createSumElement(){const e=document.createElement("input");return e.classList.add("tax__item","tax__sum"),e.type="text",e.setAttribute("required","true"),e.readOnly=!0,e.value="0.00",e.style="outline: none",e}createTaxItemElement(){const e=document.createElement("input");return e.classList.add("tax__item","tax__tax"),e.type="text",e.setAttribute("required","true"),e.readOnly=!0,e.style="outline: none",e.value="0.00",e}createBtnRemoveElement(){const e=document.createElement("button");return e.classList.add("tax__btn-remove"),e}setScrollBottom(){const e=document.querySelector(".taxes__items");e.scrollTop=e.scrollHeight}}}]);